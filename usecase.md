# Комментирование сообщения в канале

**Акторы:**

- Пользователь
- Приложение
- Бекенд

**Цель:** Как пользователь я хочу иметь возможность комментировать сообщения из канала в отдельной ветке обсуждения
конкретного сообщения, чтобы можно было обсуждать его, не переполняя основной чат канала излишней информацией.

**Предусловия:** Необходимо иметь канал, в котором можно оставлять сообщения. Необходимо иметь сообщения в канале для того, чтобы была возможность их комментировать.
Пользователь должен быть зарегистрирован и авторизирован в мессенджере.

**Сценарий:**

1. Пользователь создёт обсуждение сообщения в приложении, нажав на кнопку создания        обсуждения.<br/>
   Если комментирование конкретного сообщения уже создано, переход к альтернативному сценарию 1.

2. Бекенд создаёт обсуждение под конкретным сообщением, делая его видимым
   для всех участников канала.

3. Пользователь набирает текст для комментирования сообщения, используя текстовое поле.<br/>
   Если пользователь желает отправить в комментарии аудио/видеосообщение, переход к сценарию [Отправка аудио/видеосообщений].<br/>
   Если пользователь хочет удалить сообщение вместе с обсуждением, переход к сценарию [Удаление сообщения].<br/>
   Если пользователь хочет свернуть ветку обсуждения, переход к альтернативному сценарию 2.

4. Пользователь отправляет комментарий для сообщения, нажав на кнопку "Отправить".<br/>
   Если пользователь хочет удалить оставленный комментарий к сообщению, переход к сценарию [Удаление комментария]

5. Бэкенд обрабатывает запрос на создание комментария.

{Успешное создание комментария под сообщением}

6. Приложение передаёт пользователю сообщение об успешном создании комментария.

**Результат:**

- Оставлен комментарий под конкретным сообщением.
- Создана ветка обсуждения сообщения, если она не была создана.
- В базу данных добавлен новый комментарий для конкретного сообщения.

**Исключения:**

1. Если комментарий был оставлен после того, как комментируемое сообщение было удалено, показывается ошибка.
2. Если пользователь вводит больше символов, чем допускает текстовое поле, показывается ошибка
   "Введено максимальное количество символов".  
3. Если отсутствует соединение с сетью Интернет, показывается ошибка "Отсутствует подключение".


**Альтернативный сценарий 1:**

1. Пользователь разворачивает ветку обсуждения сообщения, нажав на кнопку "Развернуть ветку".
2. Переход на шаг 2 основного сценария.

**Альтернативный сценарий 2:**
1. Пользователь сворачивает ветку обсуждения нажатием на кнопку "Закрыть обсуждение".
2. Переход на шаг 1 основного сценария.

